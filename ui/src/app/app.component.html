<div class="top-toolbar">
  <div class="left-section">
    <svg fill="none" height="31" viewBox="0 0 31 31" width="31" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_2_15)">
        <path
          clip-rule="evenodd"
          d="M29.0102 8.71347C26.6207 3.59917 21.4308 0.055542 15.4131 0.055542C9.39554 0.055542 4.20561 3.59917 1.81612 8.71347L3.51572 9.50629C5.60656 5.03123 10.1477 1.93051 15.4131 1.93051C20.6786 1.93051 25.2198 5.03123 27.3106 9.50629L29.0102 8.71347ZM3.07711 10.5633L1.31482 9.92164C0.731614 11.523 0.413391 13.2517 0.413391 15.0549C0.413391 16.8579 0.731614 18.5866 1.31482 20.188L3.07711 19.5464C2.56681 18.1452 2.28833 16.6326 2.28833 15.0549C2.28833 13.4772 2.56681 11.9645 3.07711 10.5633ZM1.81612 21.3975C4.2056 26.5119 9.39554 30.0555 15.4131 30.0555C21.4308 30.0555 26.6207 26.5119 29.0102 21.3975L27.3106 20.6048C25.2197 25.0799 20.6785 28.1805 15.4131 28.1805C10.1477 28.1805 5.60655 25.0799 3.51571 20.6048L1.81612 21.3975ZM27.7498 10.5633C28.2599 11.9645 28.5385 13.4772 28.5385 15.0549C28.5385 16.6326 28.2599 18.1452 27.7498 19.5464L29.5119 20.188C30.0952 18.5866 30.4134 16.8579 30.4134 15.0549C30.4134 13.2517 30.0952 11.523 29.5119 9.92164L27.7498 10.5633ZM12.7882 12.0566C12.4141 12.0566 12.0116 12.123 11.6632 12.1975V9.05667L10.0951 9.22707V17.6589C10.7428 17.8634 11.5837 18.0567 12.4132 18.0567C14.2995 18.0567 15.4132 17.4202 15.4132 15.0566C15.4132 12.693 14.2995 12.0566 12.7882 12.0566ZM12.5383 16.7157C12.2542 16.7157 12.0041 16.6815 11.6632 16.602V13.5131C11.9454 13.4482 12.225 13.3975 12.5383 13.3975C13.3906 13.3975 13.7995 13.7838 13.7995 15.0566C13.7995 16.3293 13.3906 16.7157 12.5383 16.7157ZM17.7614 13.976C17.7614 14.3396 18.1817 14.3509 18.8523 14.3623C20.0568 14.385 21.068 14.601 21.068 16.1464C21.068 17.3736 20.4431 18.0555 18.4318 18.0555C17.6023 18.0555 17.0341 17.9418 16.4318 17.726L16.3069 16.4305C16.7728 16.5782 17.4091 16.7146 18.3068 16.7146C19.1135 16.7146 19.4885 16.6123 19.4885 16.135C19.4885 15.6162 19.0978 15.6114 18.3457 15.6024L18.2272 15.6009C16.9432 15.5782 16.1818 15.2601 16.1818 14.0214C16.1818 12.7373 16.909 12.0555 18.7954 12.0555C19.2386 12.0555 19.909 12.135 20.5112 12.3169L20.6362 13.6123C20.1704 13.4987 19.4317 13.3964 18.909 13.3964C18.0454 13.3964 17.7614 13.4987 17.7614 13.976ZM6.49277 12.0555C5.99278 12.0555 5.32234 12.135 4.72009 12.3168L4.59514 13.6123C5.09513 13.4987 5.8337 13.3964 6.32231 13.3964C7.14046 13.3964 7.46999 13.4646 7.46999 14.1237V14.3055L6.37913 14.3623C5.17463 14.4304 4.16335 14.635 4.16335 16.1464C4.16335 17.3736 4.78828 18.0555 6.6746 18.0555C7.54957 18.0555 8.39039 17.8623 9.03817 17.6577V14.0214C9.03817 12.7373 8.32229 12.0555 6.49277 12.0555ZM7.46974 16.6679C7.26524 16.7019 6.9924 16.7474 6.70841 16.7474C6.02665 16.7474 5.74256 16.5315 5.74256 16.0656C5.74256 15.5769 6.01521 15.4974 6.58346 15.4633L7.46974 15.4065V16.6679ZM22.3449 12.3168C22.9472 12.135 23.6176 12.0555 24.1177 12.0555C25.9471 12.0555 26.6629 12.7373 26.6629 14.0214V17.6577C26.0152 17.8623 25.1744 18.0555 24.2995 18.0555C22.4131 18.0555 21.7882 17.3736 21.7882 16.1464C21.7882 14.6009 22.7995 14.4304 24.004 14.3623L25.0948 14.3055V14.1237C25.0948 13.4646 24.7654 13.3964 23.9472 13.3964C23.4585 13.3964 22.72 13.4987 22.22 13.6123L22.3449 12.3168ZM25.0945 16.6679V15.4065L24.2083 15.4633C23.6401 15.4974 23.3674 15.5769 23.3674 16.0656C23.3674 16.5315 23.6515 16.7474 24.3333 16.7474C24.6174 16.7474 24.8901 16.702 25.0945 16.6679Z"
          fill="#870A3C"
          fill-rule="evenodd" />
      </g>
      <defs>
        <clipPath id="clip0_2_15">
          <rect fill="white" height="30" transform="translate(0.413391 0.055542)" width="30" />
        </clipPath>
      </defs>
    </svg>
    <span>CPS Status Board</span>
    <span>v{{ version }}</span>
    <span>{{ environment.label }}</span>
  </div>
  <div class="link-buttons">
    @if (environment.teamLink) {
      <span>
        <a href="{{ environment.teamLink }}" target="_blank" title="Team"><fa-icon [icon]="icoTeam"></fa-icon></a>
      </span>
    }
    @if (environment.joinLink) {
      <span>
        <a href="{{ environment.joinLink }}" target="_blank" title="Join"><fa-icon [icon]="icoJoin"></fa-icon></a>
      </span>
    }
    @if (environment.githubLink) {
      <span>
        <a href="{{ environment.githubLink }}" title="Source code @GitHub" target="_blank"><fa-icon [icon]="icoGitHub"></fa-icon></a>
      </span>
    }
  </div>
</div>

<div class="container">
  <div class="body">
    <div class="notifications">
      <app-notification (refreshed)="refreshState()" [refresh]="isLoading()" [status]="notificationStatus()"></app-notification>
    </div>
    <div class="filter">
      <cps-input
        (valueChanged)="onFilterChanged($event)"
        [value]="filter()"
        placeholder='Filter services. Separate terms by space. Filter fulltext on: env svcName statusMsg maintenanceMsg description. Example: "dev mySvc red sql deploying backend"'
        type="text" />
    </div>
    <router-outlet>
      <app-service-status [cards]="latestVisibleCardsFiltered()"></app-service-status>
      <app-service-history [cards]="historyVisibleCardsFiltered()"></app-service-history>
    </router-outlet>
  </div>
</div>
